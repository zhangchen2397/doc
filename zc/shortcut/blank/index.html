<!DOCTYPE html>
<html>
<head>
    <title>腾讯美游</title>
    <meta charset="utf-8">
    <meta name="author" content="zhangchen2397@126.com">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" href="http://3gimg.qq.com/wap30/info/info5/img/logo_icon.png">

    <link rel="stylesheet" href="http://sellfor.sinaapp.com/static/modules/page/common/base/reset.css">
    <script src="./shortcutAndroid.js"></script>
    <script src="./shortcutIos.js"></script>
</head>

<body style="min-height:900px;font:normal 14px/1.5 微软雅黑,Helvetica">
    <button id="clear-storage" style="margin:20px">清除所有记录</button><br/>
    <button id="clear-showdate" style="margin:0px 20px 20px">重置上次显示日期</button><br/>
    <button id="clear-forceclosedate" style="margin:0 20px 20px">重置主动关闭日期</button>

    <p style="margin:20px 0 5px 20px;">当前实际日期：<span id="cur-date"></span></p>
    <p style="margin:0 0 5px 20px;">上次显示日期：<span id="lastshow-date"></span></p>
    <p style="margin:0 0 5px 20px;">主动关闭日期：<span id="forceclose-date"></span></p>

    <script>
        var shortcutIns = new shortcutIos({
            key: 'travel'
        });

        var shortcutAndroidIns = new shortcutAndroid({
            key: 'travel'
        });
    </script>

    <script>
        (function() {
            var curDate = new Date();

            document.querySelector('#clear-storage').addEventListener('click', function() {
                localStorage.clear();
                document.querySelector('#lastshow-date').innerHTML = 'xxxx-xx-xx';
                document.querySelector('#forceclose-date').innerHTML = 'xxxx-xx-xx';
            }, false);

            document.querySelector('#clear-showdate').addEventListener('click', function() {
                localStorage.setItem('dailyShow-travel', '2014-11-24');
                document.querySelector('#lastshow-date').innerHTML = '2014-11-24';
            }, false);

            document.querySelector('#clear-forceclosedate').addEventListener('click', function() {
                localStorage.setItem('forceClose-travel', '2014-11-19');
                document.querySelector('#forceclose-date').innerHTML = '2014-11-19';
            }, false);

            document.querySelector('#cur-date').innerHTML = shortcutIns.getFormatDate(curDate);
            document.querySelector('#lastshow-date').innerHTML = (localStorage.getItem('dailyShow-travel') || 'xxxx-xx-xx' );
            document.querySelector('#forceclose-date').innerHTML = ( localStorage.getItem('forceClose-travel') || 'xxxx-xx-xx' );
        })();
    </script>
</body>

</html>